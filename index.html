<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Yes to Nails - Service Calculator</title>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <header>
  <h1 class="shimmer-text">Yes to Nails<sup>&reg;</sup></h1>
</header>

<section id="userPanel">
  <div id="logoContainer" class="centered"></div>
  <div id="services" class="service-list-card"></div>
  <div id="cartSection" class="service-list-card">
    <h2>Cart</h2>
    <ul id="cartItems"></ul>
    <p><strong>Total:</strong> AED <span id="cartTotal">0.00</span></p>
    <button class="btn" onclick="clearCart()">Clear</button>
  </div>

  <form id="bookingForm" class="service-list-card">
    <h2>Book Appointment</h2>
    <input type="text" id="name" placeholder="Your Name" required />
    <input type="email" id="email" placeholder="Your Email" required />
    <input type="tel" id="phone" placeholder="Phone Number" required />
    <input type="date" id="bookingDate" required />
    <div id="timeSlots"></div>
    <textarea id="notes" placeholder="Notes (optional)"></textarea>
    <button type="submit" class="btn">Confirm Booking</button>
  </form>
</section>

<section id="adminLoginSection" class="service-list-card">
  <h2>Admin Login</h2>
  <form id="adminLogin">
    <input type="password" id="adminPassword" placeholder="Enter Admin Password" required />
    <button type="submit" class="btn">Login</button>
  </form>
  <p id="adminLoginMessage" class="error"></p>
</section>

<section id="adminPanel" class="hidden">
  <div class="tab-buttons">
    <button onclick="showServiceManager()">Services</button>
    <button onclick="showBookingManager()">Bookings</button>
    <button onclick="showBusinessSettings()">Settings</button>
    <button onclick="logoutAdmin()" class="logout-btn">Logout</button>
  </div>

  <div id="serviceManager" class="tab-section">
    <h2>Manage Services</h2>
    <form id="addServiceForm">
      <input type="text" id="serviceName" placeholder="Name" required />
      <input type="text" id="serviceCategory" placeholder="Category" />
      <input type="number" id="servicePrice" placeholder="Price (AED)" required />
      <input type="number" id="serviceDuration" placeholder="Duration (min)" required />
      <textarea id="serviceDescription" placeholder="Description"></textarea>
      <button type="submit" class="btn">Add Service</button>
    </form>
    <div id="serviceList"></div>
  </div>

  <div id="bookingManager" class="tab-section hidden">
    <h2>Manage Bookings</h2>
    <table>
      <thead>
        <tr>
          <th>Date & Time</th>
          <th>Client</th>
          <th>Services</th>
          <th>Price & Duration</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="bookingsList"></tbody>
    </table>
  </div>

  <div id="businessSettings" class="tab-section hidden">
    <h2>Business Hours</h2>
    <form id="businessHoursForm">
      <div id="businessHoursFields"></div>
      <button type="submit" class="btn">Save Hours</button>
      <p id="hoursMessage" class="success"></p>
    </form>

    <h2>Logo</h2>
    <input type="file" id="logoUpload" />
    <button class="btn" onclick="saveLogo()">Save Logo</button>
    <div id="logoPreview"></div>

    <h2>Email Settings</h2>
    <label>Email for Admin Notifications</label>
    <input type="email" id="adminEmail" />
    <label><input type="checkbox" id="adminEmailToggle" /> Send Email to Admin</label><br />
    <label><input type="checkbox" id="customerEmailToggle" /> Send Email to Customer</label><br />
    <button class="btn" onclick="saveEmailSettings()">Save Email Settings</button>
    <p id="emailSettingsMessage" class="success"></p>
  </div>
</section>


  <!-- Supabase -->
  <script type="module">
    import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';
    const supabaseUrl = 'https://fyphrauehrmotfderfey.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5cGhyYXVlaHJtb3RmZGVyZmV5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgyNzcyMjIsImV4cCI6MjA2Mzg1MzIyMn0.OwrKxqDPYPcBl6D4tsfXlKNIcUlwdmCBb1CaAVUy-K0';
    window.supabase = createClient(supabaseUrl, supabaseKey);
  </script>

  <style>
    /* ✅ PASTE YOUR COMPLETE STYLE CSS HERE AS IS — already OK */
    <style>
:root {
  --pink: #ffcce0;
  --baby-pink: #ffe6f0;
  --white: #ffffff;
  --dark-pink: #d63384;
  --button-pink: #ff99cc;
}

body {
  font-family: 'Montserrat', Arial, sans-serif;
  background-color: var(--baby-pink);
  color: #333;
  margin: 0;
  padding: 0;
  line-height: 1.6;
}

header, footer {
  background-color: var(--pink);
  text-align: center;
  padding: 1.5em;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

header img {
  max-height: 80px;
  margin-bottom: 0.5em;
}

header h1 {
  margin: 0;
  color: var(--dark-pink);
  font-size: 1.8rem;
}

nav {
  text-align: center;
  padding: 0.8em;
  background-color: #fff;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

nav a {
  text-decoration: none;
  color: var(--dark-pink);
  font-weight: bold;
  cursor: pointer;
  padding: 0.5em 1em;
  border-radius: 4px;
  transition: background-color 0.3s;
}

nav a:hover {
  background-color: var(--pink);
}

main {
  display: grid;
  grid-template-columns: 1fr 1fr;
  padding: 2em;
  gap: 1.5em;
  max-width: 1200px;
  margin: 0 auto;
}

section {
  background: var(--white);
  padding: 1.5em;
  border-radius: 12px;
  box-shadow: 0 0 15px rgba(0,0,0,0.08);
}

h2 {
  color: var(--dark-pink);
  margin-top: 0;
  border-bottom: 2px solid var(--pink);
  padding-bottom: 0.5em;
}

.service-list-card {
  background-color: #fff;
  border-radius: 12px;
  padding: 1.5em;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
  margin: 1.5em 0;
  width: 100%;
  box-sizing: border-box;
}

.service-item {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 1em 0;
  border-bottom: 1px solid #eee;
}

.service-title {
  font-weight: bold;
  margin: 0;
}

.service-category {
  font-size: 0.8em;
  color: var(--dark-pink);
  background-color: var(--pink);
  padding: 0.2em 0.6em;
  border-radius: 12px;
  display: inline-block;
  margin-top: 0.3em;
}

.service-description {
  font-size: 0.9em;
  margin: 0.5em 0;
  color: #555;
}

.service-meta {
  text-align: right;
  min-width: 120px;
}

.service-meta p {
  margin: 0.2em 0;
}

.add-btn {
  background-color: var(--button-pink);
  color: white;
  border: none;
  border-radius: 4px;
  padding: 0.4em 0.8em;
  cursor: pointer;
}

.add-btn:hover {
  background-color: var(--dark-pink);
}

.cart-item, .admin-table th, .admin-table td {
  padding: 0.8em;
  border-bottom: 1px solid #eee;
}

.cart-empty {
  text-align: center;
  color: #999;
  padding: 2em 0;
}

.total-section {
  margin-top: 1em;
  padding-top: 1em;
  border-top: 2px dashed var(--pink);
}

.total-row {
  display: flex;
  justify-content: space-between;
  font-weight: bold;
}

form input, form select, form textarea {
  width: 100%;
  padding: 0.8em;
  margin: 0.5em 0 1em;
  border: 1px solid #ddd;
  border-radius: 4px;
  box-sizing: border-box;
  font-family: inherit;
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1em;
}

.btn {
  background-color: var(--button-pink);
  color: white;
  padding: 0.8em;
  border: none;
  width: 100%;
  border-radius: 4px;
  cursor: pointer;
  font-weight: bold;
  font-size: 1em;
  transition: background-color 0.3s;
}

.btn:hover {
  background-color: var(--dark-pink);
}

.hidden {
  display: none !important;
}

.logout-link {
  text-align: right;
  margin: 0.5em;
  font-size: 0.9em;
  cursor: pointer;
  color: var(--dark-pink);
}

.logout-link:hover {
  text-decoration: underline;
}

.tab-container {
  margin: 1em 0;
}

.tab-buttons {
  display: flex;
  border-bottom: 1px solid #ddd;
}

.tab-button {
  padding: 0.8em 1.5em;
  background-color: #f8f9fa;
  border: none;
  cursor: pointer;
  font-weight: bold;
}

.tab-button.active {
  background-color: var(--pink);
  color: var(--dark-pink);
  border-bottom: 2px solid var(--dark-pink);
}

.tab-content {
  padding: 1em 0;
}

.tab-panel {
  display: none;
}

.tab-panel.active {
  display: block;
}

.email-settings {
  margin: 1em 0;
  padding: 1em;
  background-color: #f8f9fa;
  border-radius: 8px;
}

.email-settings h4 {
  margin-top: 0;
  color: var(--dark-pink);
}

.switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: .4s;
  border-radius: 34px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: .4s;
  border-radius: 50%;
}

input:checked + .slider {
  background-color: var(--button-pink);
}

input:checked + .slider:before {
  transform: translateX(26px);
}

.logo-preview {
  max-width: 200px;
  max-height: 100px;
  margin: 1em 0;
  border: 1px dashed #ddd;
  padding: 0.5em;
}

footer {
  padding: 2em;
  text-align: center;
  color: var(--dark-pink);
  font-size: 0.9em;
}

@media (max-width: 768px) {
  main {
    grid-template-columns: 1fr;
    padding: 1em;
  }
  .form-row {
    grid-template-columns: 1fr;
  }
  header h1 {
    font-size: 1.5rem;
  }
}
</style>

  </style>
</head>

<body>
  <header>
    <div id="logoContainer"></div>
    <h1 class="shimmer-text">Yes to Nails<sup>&reg;</sup></h1>
  </header>

  <nav>
    <a onclick="showUserPanel()">Services</a> |
    <a onclick="showAdminLogin()">Admin</a>
  </nav>

  <!-- === MAIN USER PANEL === -->
  <main id="userPanel">
    <section id="services">
      <h2>Browse Services</h2>
      <select id="categoryFilter" onchange="filterServices()">
        <option value="all">All Categories</option>
      </select>
      <div id="serviceList"></div>
    </section>

    <section id="cartSection">
      <h2>Your Selection</h2>
      <div id="cart"></div>
      <div class="total-section">
        <div class="total-row"><span>Total Duration:</span><span id="totalDuration">0 mins</span></div>
        <div class="total-row"><span>Total Price:</span><span>AED <span id="totalPrice">0.00</span></span></div>
      </div>
    </section>

    <section style="grid-column: span 2;">
      <h2>Book Your Appointment</h2>
      <form id="bookingForm" onsubmit="submitBooking(event)">
        <div class="form-row">
          <div>
            <label for="name">Full Name</label>
            <input id="name" placeholder="Your Name" required type="text" />
          </div>
          <div>
            <label for="email">Email</label>
            <input id="email" placeholder="Your Email" required type="email" />
          </div>
        </div>

        <div class="form-row">
          <div>
            <label for="phone">Phone Number</label>
            <input id="phone" placeholder="Your Phone Number" required type="tel" />
          </div>
          <div>
            <label for="bookingDate">Preferred Date</label>
            <input id="bookingDate" required type="date" onchange="generateTimeSlots()" />
          </div>
        </div>

        <div>
          <label>Select Time Slot</label>
          <div class="time-slots-container" id="timeSlots">
            <p>Please select a date first</p>
          </div>
          <input type="hidden" id="selectedTime" required />
        </div>

        <label for="notes">Special Requests</label>
        <textarea id="notes" placeholder="Any special requests or notes" rows="3"></textarea>

        <button class="btn" id="bookingSubmitBtn" type="submit">Confirm Booking</button>
      </form>
      <div id="confirmation"></div>
    </section>
  </main>

  <!-- === ADMIN LOGIN === -->
  <section id="adminLoginSection" class="hidden">
    <h2>Admin Login</h2>
    <form id="adminLogin" onsubmit="adminAuth(event)">
      <label for="adminUser">Username</label>
      <input id="adminUser" required type="text" placeholder="Admin Username" />
      <label for="adminPass">Password</label>
      <input id="adminPass" required type="password" placeholder="Admin Password" />
      <button type="submit" class="btn">Login</button>
    </form>
    <div id="adminLoginMessage" class="warning-message"></div>
  </section>

  <!-- === ADMIN PANEL === -->
  <section id="adminPanel" class="hidden">
    <h2>Admin Dashboard</h2>
    <div class="logout-link" onclick="logoutAdmin()">Logout</div>

    <div class="tab-container">
      <div class="tab-buttons">
        <button class="tab-button active" onclick="switchTab('servicesTab')">Manage Services</button>
        <button class="tab-button" onclick="switchTab('bookingsTab')">Bookings</button>
        <button class="tab-button" onclick="switchTab('settingsTab')">Settings</button>
      </div>

      <div class="tab-content">
        <!-- SERVICES MANAGER -->
        <div id="servicesTab" class="tab-panel active">
          <div class="admin-card">
            <h3>Service Manager</h3>
            <div id="serviceManagerSection"></div>
          </div>
        </div>

        <!-- BOOKINGS TABLE -->
        <div id="bookingsTab" class="tab-panel">
          <div class="admin-card">
            <h3>Booking List</h3>
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Date/Time</th>
                  <th>Client</th>
                  <th>Services</th>
                  <th>Price</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="bookingsList"></tbody>
            </table>
          </div>
        </div>

        <!-- SETTINGS -->
        <div id="settingsTab" class="tab-panel">
          <div class="admin-card">
            <h3>Business Hours</h3>
            <form id="businessHoursForm"></form>
            <div id="hoursMessage" class="success-message"></div>
          </div>

          <div class="admin-card">
            <h3>Upload Logo</h3>
            <input type="file" id="logoUpload" />
            <button class="btn" onclick="saveLogo()">Upload</button>
            <div id="logoPreview"></div>
          </div>

          <div class="admin-card">
            <h3>Email Settings</h3>
            <form onsubmit="saveEmailSettings(); return false;">
              <input type="email" id="adminEmail" placeholder="Admin Email" />
              <div class="email-toggle">
                <label class="switch">
                  <input type="checkbox" id="adminEmailToggle" />
                  <span class="slider"></span>
                </label>
                <label>Send email to admin</label>
              </div>
              <div class="email-toggle">
                <label class="switch">
                  <input type="checkbox" id="customerEmailToggle" />
                  <span class="slider"></span>
                </label>
                <label>Send confirmation to customer</label>
              </div>
              <button type="submit" class="btn">Save Settings</button>
              <div id="emailSettingsMessage" class="success-message"></div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer>&copy; 2025 Yes to Nails. All rights reserved.</footer>

</body>
</html>
