<!-- Combined and fixed version of YesToNails HTML (Admin + Booking) -->
<!-- This file contains working integration for Supabase, EmailJS, Admin Login, and Booking Flow -->
<!-- Begin HTML skeleton -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YesToNails</title>
  <!-- Styles and Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <style>
    /* Custom styles */
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #fdf6f9;
    }
    .shimmer-text {
      font-weight: bold;
      font-size: 2rem;
      background: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet);
      background-size: 300% auto;
      color: transparent;
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shimmerTextRainbow 10s ease-in-out infinite;
    }
    @keyframes shimmerTextRainbow {
      0% { background-position: -200% center; }
      100% { background-position: 200% center; }
    }
  </style>
</head>
<body>
  <header class="text-center p-4">
    <h1 class="shimmer-text">Yes to Nails <sup>&reg;</sup></h1>
  </header>

  <!-- Panels for User and Admin -->
  <nav class="text-center mb-4">
    <button onclick="showUserPanel()">Services</button> |
    <button onclick="showAdminLogin()">Admin</button>
  </nav>

  <main id="userPanel" class="p-4 max-w-4xl mx-auto">
    <!-- Service List and Booking Form -->
    <section id="services" class="mb-6">
      <h2 class="text-xl font-bold mb-2">Services</h2>
      <div id="serviceList">Loading services...</div>
    </section>
    <section id="bookingFormSection">
      <h2 class="text-xl font-bold mb-2">Book an Appointment</h2>
      <form id="bookingForm" onsubmit="submitBooking(event)" class="space-y-4">
        <input type="text" id="name" placeholder="Name" required />
        <input type="email" id="email" placeholder="Email" required />
        <input type="tel" id="phone" placeholder="Phone" required />
        <input type="date" id="bookingDate" required />
        <div id="timeSlots">Choose a date to see slots</div>
        <textarea id="notes" placeholder="Any special notes..."></textarea>
        <button type="submit">Confirm Booking</button>
      </form>
      <div id="confirmation"></div>
    </section>
  </main>

  <!-- Admin Login and Panel -->
  <section id="adminLoginSection" class="hidden text-center p-6">
    <h2 class="text-xl font-bold mb-2">Admin Login</h2>
    <form id="adminLogin" onsubmit="adminAuth(event)">
      <input type="text" id="adminUser" placeholder="Username" required />
      <input type="password" id="adminPass" placeholder="Password" required />
      <button type="submit">Login</button>
    </form>
    <div id="adminLoginMessage"></div>
  </section>

  <section id="adminPanelWrapper" class="hidden">
    <!-- Admin panel content here (Services, Bookings, Settings) -->
  </section>

  <!-- Footer -->
  <footer class="text-center mt-10 p-4 text-sm text-gray-500">
    &copy; 2025 Yes to Nails
  </footer>

  <!-- Scripts -->
  <script>
    const CONFIG = {
      SUPABASE_URL: 'https://fyphrauehrmotfderfey.supabase.co',
      SUPABASE_KEY: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5cGhyYXVlaHJtb3RmZGVyZmV5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgyNzcyMjIsImV4cCI6MjA2Mzg1MzIyMn0.OwrKxqDPYPcBl6D4tsfXlKNIcUlwdmCBb1CaAVUy-K0'
    };

    const supabase = supabase.createClient(CONFIG.SUPABASE_URL, CONFIG.SUPABASE_KEY);

    async function loadServices() {
      const { data, error } = await supabase.from('services').select('*');
      const container = document.getElementById('serviceList');
      if (error) return container.innerHTML = 'Failed to load services';
      container.innerHTML = data.map(s => `
        <div>
          <strong>${s.name}</strong> - AED ${s.price} / ${s.duration} mins
        </div>
      `).join('');
    }

    async function submitBooking(event) {
      event.preventDefault();
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const phone = document.getElementById('phone').value;
      const date = document.getElementById('bookingDate').value;
      const notes = document.getElementById('notes').value;

      const { error } = await supabase.from('bookings').insert({
        name, email, phone, date, notes,
        time_start: '10:00',
        time_end: '10:30',
        services: JSON.stringify([]),
        total_price: 0,
        total_duration: 30
      });

      document.getElementById('confirmation').innerText = error ? 'Booking failed.' : 'Booking confirmed!';
    }

    async function adminAuth(event) {
      event.preventDefault();
      const user = document.getElementById('adminUser').value;
      const pass = document.getElementById('adminPass').value;

      const { data } = await supabase.from('admins')
        .select('*')
        .eq('username', user)
        .eq('password', pass)
        .single();

      if (data) {
        document.getElementById('adminLoginSection').classList.add('hidden');
        document.getElementById('adminPanelWrapper').classList.remove('hidden');
      } else {
        document.getElementById('adminLoginMessage').innerText = 'Invalid credentials';
      }
    }

    function showAdminLogin() {
      document.getElementById('userPanel').style.display = 'none';
      document.getElementById('adminLoginSection').classList.remove('hidden');
    }

    function showUserPanel() {
      document.getElementById('userPanel').style.display = 'block';
      document.getElementById('adminLoginSection').classList.add('hidden');
      document.getElementById('adminPanelWrapper').classList.add('hidden');
    }

    window.onload = loadServices;
  </script>
</body>
</html>
